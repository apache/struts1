<?xml version="1.0"?>
<!--
Copyright 1999-2005 The Apache Software Foundation
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<!--
// ======================================================================== 78
-->
<document>
<properties>
  <title>Installation</title>
</properties>

<body>

<section name="Quick Install for Testing, Documentation and Tutorial"
         href="QuickInstall">
    <ul>
        <li>Download Tiles binary distribution</li>
        <li>Unzip distribution</li>
        <li>Create a new web application containing Tiles and all dependencies.</li>
        <li>Create one or more Tiles Definitions XML files in the /WEB-INF
            directory of the new application.</li>
        <li>Deploy the new application.</li>
    </ul>

</section>

<section name="Prerequisite Software" href="Prerequisites">
    <p>A full listing of Tiles dependencies can be found 
        <a href="dependencies.html">here.</a>  This sections discusses those
        items that are required at runtime.</p>
        
    <ul>
        <li><strong>Java Development Kit</strong> -  Tiles will work with any
            compliant JDK version 1.3 or later.</li>
        <li><strong>Servlet Container</strong> - Tiles supports any servlet
            container that is compatible with the Servlet API Specification, 
            version 2.2 or later, and the JavaServer Pages (JSP) Specification, 
            version 1.1 or later. One popular choice is to download Apache's
            <a href="http://jakarta.apache.org/tomcat">Tomcat</a></li>
        <li><strong>XML Parser</strong> - Tiles <strong>requires</strong> the
            presence of an XML parser that is compatible with the Java API for
            XML Parsing (JAXP) specification, 1.1 or later. If you are using 
            JDK 1.4 or later, an XML parser is provided with the JDK.  Otherwise
            you can download and install the JAXP 
            <a href="http://java.sun.com/xml">reference implementation</a> or
            any other JAXP compliant parser, such as 
            <a href="http://xml.apache.org/xerces-j">Xerces</a>. </li>
        <li><strong>Jakarta Commons Packages</strong> -
            Tiles utilizes several packages from the
            <a href="http://jakarta.apache.org/commons/">Jakarta Commons
            Project</a>.  See the <a href="dependencies.html">Dependencies List</a>
            for specific versions.  These dependencies can be downloaded using
            the Maven build process.</li>
        <li><strong>Struts Framework</strong> - If you are planning to use
            Tiles with Struts, you should download and install Struts from
            <a href="http://struts.apache.org/">
            Apache Struts Project</a>.
            If you have acquired Tiles with the Struts distribution, you
            don't need to install it again. Tiles can run without Struts.
            In this case you lose some features.</li>
    </ul>
</section>

<section name="Install A Tiles Binary Distribution" href="Installing">
    <p>First, download a binary distribution of Tiles, currently distributed
       with the Struts Framework.</p>
    <p>Unpack the Tiles binary distribution into a convenient directory.
       (If you build Tiles from the source distribution,
       the result of the build will already be an unpacked binary distribution
       for you). The distribution consists of the following contents:</p>
    <ul>
        <li><strong>struts-tiles-VERSION.jar</strong> - This JAR file contains all of
            the Java classes included in Tiles. It should be copied into the
            <code>WEB-INF/lib</code> directory of your web application.
            <em>WARNING</em> - If you are going to be hosting multiple tiles
            based applications on the same servlet container, you will be
            tempted to place the JAR file into the shared
            repository supported by your container. Be advised that this will
            likely cause you to encounter ClassNotFoundException problems
            unless <em>all</em> of your application classes are stored in the
            shared repository.
        </li>
    </ul>
    <p>To use Tiles in your own application, you will need to follow
       these steps:</p>
    <ul>
        <li>Copy the prerequisite Jar files into
            the <code>WEB-INF/lib</code> directory of your web application.
        </li>
        <li>If you want to use the <em>definitions configuration file</em>, you
            need to initialize the definitions factory. This can be done as follows:
        <ul>
            <li><strong>Using Tiles With Struts</strong> -
                Modify the <code>WEB-INF/web.xml</code> file
                for your web application to use a <code>&lt;servlet&gt;
                </code> that responds to Struts actions.  Usually, this
                will be the standard Struts ActionServlet:</li>
    <source><![CDATA[
  <servlet>
    <servlet-name>action</servlet-name>
    <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
    <init-param>
      <param-name>config</param-name>
      <param-value>/WEB-INF/struts-config.xml</param-value>
    </init-param>
    <init-param>
        <param-name>chainConfig</param-name>
        <param-value>org/apache/struts/tiles/chain-config.xml</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
 </servlet>
    ]]></source>
            <li><strong>Using Tiles With Struts</strong> -
                You will also need to 
                configure the Tiles Plugin and the Tiles Request Processor to
                allow Struts to respond to Tiles-based Action Forwards.  Below
                is a sample Tiles Plugin configuration.
    <source><![CDATA[
    <plug-in className="org.apache.struts.tiles.TilesPlugin">
    <set-property
        property="definitions-config"
           value="/WEB-INF/tiles-defs.xml"/>
    </plug-in>
    ]]></source>
            </li>
            <li><strong>Using Tiles Without Struts</strong> -
                If you don't want to use Struts, use the
                <code>org.apache.struts.tiles.TilesServlet</code> as the servlet.
            </li>
            <li>Create a configuration file for definitions. Its name must
                match the one provided before in <code>WEB-INF/web.xml</code>.
                Several comma separated names can be provided.
            </li>
        </ul>
        </li>
        <li>Modify the <code>WEB-INF/web.xml</code> file of your web application
            to include the following tag library declarations: 
            Note that this step is not necessary in a Servlet 2.3/2.4 envrironment.

    <source><![CDATA[
<taglib>
  <taglib-uri>/WEB-INF/tiles.tld</taglib-uri>
  <taglib-location>/WEB-INF/tiles.tld</taglib-location>
</taglib>
    ]]></source>
        </li>
    </ul>
    <ul>
        <li>At the top of each JSP page that will use the Tiles custom tags,
            add line(s) declaring the Tiles custom tag libraries used on this
            particular page, like this:

    <source><![CDATA[
    <%@ taglib uri="/WEB-INF/tiles.tld" prefix="tiles" %>
    ]]></source>

        </li>
    </ul>
    <ul>
        <li>For Servlet 2.3/2.4 applications replace the above taglib reference with
            the following:

    <source><![CDATA[
    <%@ taglib uri="http://struts.apache.org/tags-tiles" prefix="tiles" %>
    ]]></source>
        </li>
        <li>When compiling the Java classes that comprise your application,
            be sure to include the <code>tiles.jar</code> and
            <code>commons-*.jar</code> files (copied earlier) on the
            CLASSPATH that is submitted to the compiler.</li>
    </ul>
    <p>Note to Struts 1.0 users :</p>
    <ul>
        <li>You should use a <code>tiles.jar</code> built with Struts 1.0.x.</li>
        <li>If you have downloaded a Tiles version build with Struts 1.0.x, you
            already have it. </li>
    </ul>

    <p>Note to Struts 1.1 and 1.2 users :</p>
    <ul>
        <li>You should also initialize a <code>TilesRequestProcessor</code>.</li>
        <li>To do so, add following lines in your <code>struts-config.xml</code>
            file :

    <source><![CDATA[
    <controller processorClass="org.apache.struts.tiles.TilesRequestProcessor">
    </controller>
    ]]></source>

        </li>
    </ul>
</section>

<section name="Installing Tiles with your servlet container" href="Containers">
    <p><strong>WARNING</strong> - Do <strong>NOT</strong> add
       <code>tiles.jar</code> to the classpath of your servlet container in
       an attempt to avoid placing it in the <code>/WEB-INF/lib</code>
       directory of each individual web app! Doing so will cause problems with
       <code>ClassNotFoundException</code> exceptions. </p>

    <p>For most containers, you need only to:</p>
    <ul>
        <li>Copy the WAR files in your Tiles <code>/webapp</code> directory
            to your    containers <code>webapps</code> directory. </li>
        <li>In some cases, you may need to restart your container if it
            is running.</li>
    </ul>

    <h4>Status of various containers</h4>
    <p>For the status of additional containers, please refer to the
        <a href="http://struts.apache.org/struts-doc-1.2.x/userGuide/installation.html#Containers">
        Struts installation page</a>).
    </p>
</section>

<section name="Building Tiles From Source" href="Building">
    <p>First, download a source distribution of Tiles.  See
       <a href="cvs-usage.html">here</a> for more info.  (Note: Tiles can also
       be found <a href="http://www.lifl.fr/~dumoulin/tiles/">here</a>.)  You 
       can then use the included Maven build script to build Tiles.</p>
</section>
</body>
</document>
